(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{JFOO:function(t,e,a){},JTuA:function(t,e,a){"use strict";var r=a("JFOO");a.n(r).a},SkQF:function(t,e,a){},oVsn:function(t,e,a){"use strict";var r=a("SkQF");a.n(r).a},pIus:function(t,e,a){"use strict";a.r(e),a("GguQ");var r=a("p46w"),i=a.n(r),l={name:"addArticle",data:function(){return{header:{Authorization:"Bearer"+i.a.get("access_token")},article:{title:"文章测试-标题",sort:"",top:!0,content_html:"",thumbnail:"",banner:""},initData:"",restaurants:[]}},methods:{handlethumbnailSuccess:function(t,e){this.article.thumbnail=t.data[0]},beforethumbnailUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,r=t.size/1024/1024<2;return e||a||this.$message.error("上传文章缩略图只能是 JPG/PNG 格式!"),r||this.$message.error("上传文章缩略图大小不能超过 2MB!"),r&&e||a},handleBannerSuccess:function(t,e){this.article.banner=t.data[0]},beforeBannerUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,r=t.size/1024/1024<5;return e||a||this.$message.error("上传banner只能是 JPG/PNG 格式!"),r||this.$message.error("上传banner图片大小不能超过 5MB!"),r&&e||a},querySearch:function(t,e){var a=this.restaurants;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},loadAll:function(){return[{value:"vue"},{value:"node.js"}]},handleSelect:function(t){console.log(t)},getContent:function(){alert(this.editorContent)},submitArticle:function(){var t=this;this.$request.fetchAddArticle(this.article).then((function(e){t.$restBack(e.data)})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.restaurants=this.loadAll();var e=this.$route.query.articleId;if(!e)return!1;this.$request.fetchGetArticle({id:e}).then((function(e){return console.log(e),t.article=e.data,editor.txt.html(e.data.content_html),!1})).catch((function(t){console.log(t)}))}},n=(a("oVsn"),a("JTuA"),a("KHd+")),s=Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addArticle"},[a("el-form",{ref:"article",attrs:{inline:!0,model:t.article,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{staticClass:"title",model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标签"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容"},on:{select:t.handleSelect},model:{value:t.article.sort,callback:function(e){t.$set(t.article,"sort",e)},expression:"article.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否置顶"}},[a("el-switch",{model:{value:t.article.top,callback:function(e){t.$set(t.article,"top",e)},expression:"article.top"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"subBtn",attrs:{type:"primary"},on:{click:t.submitArticle}},[t._v("发布")])],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"缩略图上传","label-width":"95px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{name:"file",headers:t.header,action:this.$path+"editor/uploadImg","show-file-list":!1,"on-success":t.handlethumbnailSuccess,"before-upload":t.beforethumbnailUpload}},[t.article.thumbnail?a("img",{staticClass:"avatar",attrs:{src:t.article.thumbnail}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"banner图上传","label-width":"110px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/editor/uploadImg","show-file-list":!1,"on-success":t.handleBannerSuccess,"before-upload":t.beforeBannerUpload}},[t.article.banner?a("img",{staticClass:"avatar",attrs:{src:t.article.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("div",{ref:"editor",staticStyle:{"text-align":"left"}})],1)}),[],!1,null,"0ed0999f",null);e.default=s.exports}}]);
//# sourceMappingURL=0.6b6940db54a914cb70a9.js.map
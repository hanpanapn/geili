(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"G+Xm":function(t,e,n){"use strict";n.r(e);var a={name:"commentList",data:function(){return{total:0,currentPage:1,sort:null,commentData:[]}},methods:{handleDelete:function(t,e){console.log(t,e);var n=this;this.$request.fetchDelComment({id:e.id}).then((function(t){console.log(t),n.$message({showClose:!0,message:t.data.message,type:"success"}),n.getList({currentPage:n.currentPage,pageSize:10})})).catch((function(t){console.log(t)}))},currentChange:function(t){console.log(t),this.currentPage=t,this.getList({currentPage:t,pageSize:10})},getList:function(t){var e=this;this.$request.fetchCommentList(t).then((function(t){for(var n=0;n<t.data.rows.length;n++){var a=new Date(t.data.rows[n].createdAt),o=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,r=a.getDate()<10?"0"+a.getDate():a.getDate(),l=a.getHours()<10?"0"+a.getHours():a.getHours(),c=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),s=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds();t.data.rows[n].createdAt=a.getFullYear()+"-"+o+"-"+r+" "+l+":"+c+":"+s,t.data.rows[n].content.length>22&&(t.data.rows[n].content=t.data.rows[n].content.substring(0,22)+"..."),t.data.rows[n].article_title.length>22&&(t.data.rows[n].article_title=t.data.rows[n].article_title.substring(0,22)+"...")}console.log(t),e.total=t.data.count,e.commentData=t.data.rows})).catch((function(t){console.log(t)}))}},mounted:function(){this.getList({currentPage:1,pageSize:10})}},o=n("KHd+"),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.commentData,"max-height":"550"}},[n("el-table-column",{attrs:{fixed:"",prop:"createdAt",label:"评论时间",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"article_title",label:"所属文章"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),n("el-table-column",{attrs:{prop:"author_name",label:"评论人",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.currentChange,"prev-click":t.currentChange,"next-click":t.currentChange}})],1)}),[],!1,null,"61e69e60",null);e.default=r.exports}}]);
//# sourceMappingURL=8.d63d5326aaf35430fbe1.js.map